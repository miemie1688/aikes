(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-619473e9"],{"1f90":function(t,e,a){},9422:function(t,e,a){"use strict";a("1f90")},a442:function(t,e,a){"use strict";a.r(e);a("b0c0");var n=function(){var t=this,e=t._self._c,a=t._self._setupProxy;return e("div",{staticClass:"reservation-management"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("span",[t._v("预约列表")]),e("button",{staticClass:"btn btn-primary",attrs:{disabled:a.loading},on:{click:a.fetchList}},[t._v("刷新")])]),a.loading?e("div",{staticClass:"loading-overlay"},[t._v("加载中...")]):e("table",{staticClass:"data-table"},[t._m(0),e("tbody",t._l(a.tableData,(function(n){return e("tr",{key:n.id},[e("td",{staticClass:"col-id"},[t._v(t._s(n.id))]),e("td",[t._v(t._s(n.courseId))]),e("td",[t._v(t._s(n.courseName))]),e("td",[t._v(t._s(n.name))]),e("td",[t._v(t._s(n.phone))]),e("td",[t._v(t._s(n.appointment))]),e("td",[t._v(t._s(n.createTime))]),e("td",{class:["tag",a.getStatusTagClass(n.status)]},[t._v(t._s(n.status))]),e("td",{staticClass:"col-actions"},[e("button",{staticClass:"btn btn-action btn-confirm",on:{click:function(t){return a.handleUpdateStatus(n.id,"已确认")}}},[t._v(" 确认 ")]),e("button",{staticClass:"btn btn-action btn-cancel",on:{click:function(t){return a.handleUpdateStatus(n.id,"已取消")}}},[t._v(" 取消 ")]),e("button",{staticClass:"btn btn-action btn-delete",on:{click:function(t){return a.handleDelete(n.id)}}},[t._v(" 删除 ")])])])})),0)]),a.loading||0!==a.tableData.length?t._e():e("div",{staticClass:"no-data"},[t._v(" 暂无预约数据 ")])])])},s=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("thead",[e("tr",[e("th",{staticClass:"col-id"},[t._v("ID")]),e("th",[t._v("课程ID")]),e("th",[t._v("课程名称")]),e("th",[t._v("预约人")]),e("th",[t._v("联系电话")]),e("th",[t._v("预约时间")]),e("th",[t._v("创建时间")]),e("th",{staticClass:"col-status"},[t._v("状态")]),e("th",{staticClass:"col-actions"},[t._v("操作")])])])}],c=a("c14f"),r=a("1da1"),i=(a("99af"),a("2b0e")),o=a("b775"),u="/api/admin/reserveadmin";function l(){return Object(o["b"])(u+"/list")}function d(t){return Object(o["d"])(u+"/delete/".concat(t),null)}function v(t,e){var a={id:t,status:e};return Object(o["d"])(u+"/updateStatus",a)}var b={__name:"reserve",setup:function(t){var e=Object(i["ref"])([]),a=Object(i["ref"])(!1),n=function(){var t=Object(r["a"])(Object(c["a"])().m((function t(){var n,s,r;return Object(c["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:return a.value=!0,t.p=1,t.n=2,l();case 2:n=t.v,n&&1===n.code?n.response&&1===n.response.code?(e.value=n.response.data||[],console.log("列表获取成功: ".concat(n.response.message))):(alert("错误：".concat((null===(s=n.response)||void 0===s?void 0:s.message)||"内部数据格式异常")),e.value=[]):(alert("错误：获取预约列表失败！原因: ".concat(n.message||"未知错误")),e.value=[]),t.n=4;break;case 3:t.p=3,r=t.v,console.error("获取预约列表失败:",r),alert("错误：获取预约列表失败！请检查网络或后端接口。");case 4:return t.p=4,a.value=!1,t.f(4);case 5:return t.a(2)}}),t,null,[[1,3,4,5]])})));return function(){return t.apply(this,arguments)}}(),s=function(t){switch(t){case"待确认":case"待处理":return"tag-info";case"已确认":return"tag-success";case"已取消":case"已拒绝":return"tag-danger";default:return"tag-default"}},o=function(){var t=Object(r["a"])(Object(c["a"])().m((function t(e,a){var s,r,i;return Object(c["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:if(t.p=0,s=confirm("确定要将 ID 为 ".concat(e," 的预约状态更新为 [").concat(a,"] 吗？")),s){t.n=1;break}return t.a(2);case 1:return t.n=2,v(e,a);case 2:if(r=t.v,!r||1!==r.code){t.n=4;break}return alert("".concat(a," 成功！")),t.n=3,n();case 3:t.n=5;break;case 4:alert("错误：状态更新失败！原因: ".concat(r.message||"未知错误"));case 5:t.n=7;break;case 6:t.p=6,i=t.v,console.error("更新状态失败:",i),alert("操作失败，请检查网络或后端接口。");case 7:return t.a(2)}}),t,null,[[0,6]])})));return function(e,a){return t.apply(this,arguments)}}(),u=function(){var t=Object(r["a"])(Object(c["a"])().m((function t(e){var a,s,r;return Object(c["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:if(t.p=0,a=confirm("警告：确定要删除 ID 为 ".concat(e," 的预约吗？此操作不可逆！")),a){t.n=1;break}return t.a(2);case 1:return t.n=2,d(e);case 2:if(s=t.v,!s||1!==s.code){t.n=4;break}return alert("删除成功！"),t.n=3,n();case 3:t.n=5;break;case 4:alert("错误：删除失败！原因: ".concat(s.message||"未知错误"));case 5:t.n=7;break;case 6:t.p=6,r=t.v,console.error("删除失败:",r),alert("操作失败，请检查网络或后端接口。");case 7:return t.a(2)}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}();return Object(i["onMounted"])((function(){n()})),{__sfc:!0,tableData:e,loading:a,fetchList:n,getStatusTagClass:s,handleUpdateStatus:o,handleDelete:u}}},f=b,_=(a("9422"),a("2877")),p=Object(_["a"])(f,n,s,!1,null,"2d510c0f",null);e["default"]=p.exports}}]);